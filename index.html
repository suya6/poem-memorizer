<!-- M1: ç¡®è®¤åŸæ–‡æ¨¡å— -->
<div class="card">
  <h3>ğŸ“š é€‰æ‹©æˆ–ç²˜è´´è¦èƒŒè¯µçš„å¤æ–‡</h3>
  
  <!-- ä¸‹æ‹‰é€‰æ‹©é¢„ç½®ç¯‡ç›® -->
  <label>é€‰æ‹©ç¯‡ç›®ï¼š</label>
  <select id="poemSelect" style="width:100%; padding:8px; margin:8px 0; border-radius:6px;">
    <option value="">-- è¯·é€‰æ‹©æˆ–æ‰‹åŠ¨ç²˜è´´ --</option>
    <option value="æ™‹å¤ªå…ƒä¸­ï¼Œæ­¦é™µäººæ•é±¼ä¸ºä¸šï¼Œç¼˜æºªè¡Œï¼Œå¿˜è·¯ä¹‹è¿œè¿‘ã€‚å¿½é€¢æ¡ƒèŠ±æ—ï¼Œå¤¹å²¸æ•°ç™¾æ­¥ï¼Œä¸­æ— æ‚æ ‘ï¼ŒèŠ³è‰é²œç¾ï¼Œè½è‹±ç¼¤çº·ã€‚æ¸”äººç”šå¼‚ä¹‹ï¼Œå¤å‰è¡Œï¼Œæ¬²ç©·å…¶æ—ã€‚">ã€Šæ¡ƒèŠ±æºè®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
    <option value="åº†å†å››å¹´æ˜¥ï¼Œæ»•å­äº¬è°ªå®ˆå·´é™µéƒ¡ã€‚è¶Šæ˜å¹´ï¼Œæ”¿é€šäººå’Œï¼Œç™¾åºŸå…·å…´...">ã€Šå²³é˜³æ¥¼è®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
    <option value="äºˆç‹¬çˆ±è²ä¹‹å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œæ¿¯æ¸…æ¶Ÿè€Œä¸å¦–...">ã€Šçˆ±è²è¯´ã€‹</option>
    <!-- å¯ç»§ç»­æ·»åŠ æ›´å¤š -->
  </select>

  <!-- æ‰‹åŠ¨ç²˜è´´ -->
  <label>æˆ–ç²˜è´´åŸæ–‡ï¼š</label>
  <textarea id="manualInput" placeholder="åœ¨æ­¤ç²˜è´´å…¨æ–‡..." rows="4" style="width:100%; padding:10px; border-radius:6px;"></textarea>

  <button onclick="confirmYuanwen()">âœ… ç¡®è®¤åŸæ–‡</button>
</div>

<script>
// å…¨å±€å˜é‡ï¼šå­˜å‚¨æœ€ç»ˆç¡®è®¤çš„åŸæ–‡
window.yuanwen = "";

function confirmYuanwen() {
  const selectVal = document.getElementById('poemSelect').value;
  const manualVal = document.getElementById('manualInput').value.trim();

  let finalText = "";

  if (manualVal) {
    // ä¼˜å…ˆä½¿ç”¨æ‰‹åŠ¨ç²˜è´´å†…å®¹
    finalText = manualVal;
  } else if (selectVal) {
    // ä½¿ç”¨ä¸‹æ‹‰é€‰æ‹©å†…å®¹
    finalText = selectVal;
  } else {
    alert("è¯·å…ˆé€‰æ‹©ä¸€ç¯‡å¤æ–‡æˆ–ç²˜è´´åŸæ–‡ï¼");
    return;
  }

  // å­˜å…¥å…¨å±€å˜é‡
  window.yuanwen = finalText;

  // å¯é€‰ï¼šæ˜¾ç¤ºç¡®è®¤ä¿¡æ¯
  alert("åŸæ–‡å·²ç¡®è®¤ï¼å…± " + finalText.length + " å­—ã€‚\n\nå¼€å§‹åˆ†æ®µèƒŒè¯µå§ï½");

  // TODO: è¿™é‡Œåç»­å¯è°ƒç”¨åˆ†æ®µå‡½æ•° autoSegment(window.yuanwen)
}
</script>
