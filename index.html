<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>å¤è¯—èƒŒè¯µ</title>
</head>
<body style="font-family: sans-serif; padding: 20px; background: #f0f0f0;">
  <h2>ğŸ‰ æ­å–œï¼ä½ çš„ç½‘é¡µå·²æˆåŠŸåˆ›å»ºï¼</h2>
  <p>è¿™æ˜¯ä½ çš„ç¬¬ä¸€ä¸ªå¤è¯—èƒŒè¯µåŠ©æ‰‹é¡µé¢ã€‚</p>
  <button onclick="alert('è¯­éŸ³åŠŸèƒ½å³å°†ä¸Šçº¿ï¼')">ğŸ¤ æµ‹è¯•æŒ‰é’®</button>
</body>
</html>
<!-- M1: ç¡®è®¤åŸæ–‡æ¨¡å— -->
<div class="card">
  <h3>ğŸ“š é€‰æ‹©æˆ–ç²˜è´´è¦èƒŒè¯µçš„å¤æ–‡</h3>
  
  <!-- ä¸‹æ‹‰é€‰æ‹©é¢„ç½®ç¯‡ç›® -->
  <label>é€‰æ‹©ç¯‡ç›®ï¼š</label>
  <select id="poemSelect" style="width:100%; padding:8px; margin:8px 0; border-radius:6px;">
    <option value="">-- è¯·é€‰æ‹© --</option>
    <option value="æ™‹å¤ªå…ƒä¸­ï¼Œæ­¦é™µäººæ•é±¼ä¸ºä¸šï¼Œç¼˜æºªè¡Œï¼Œå¿˜è·¯ä¹‹è¿œè¿‘ã€‚å¿½é€¢æ¡ƒèŠ±æ—ï¼Œå¤¹å²¸æ•°ç™¾æ­¥ï¼Œä¸­æ— æ‚æ ‘ï¼ŒèŠ³è‰é²œç¾ï¼Œè½è‹±ç¼¤çº·ã€‚æ¸”äººç”šå¼‚ä¹‹ï¼Œå¤å‰è¡Œï¼Œæ¬²ç©·å…¶æ—ã€‚">ã€Šæ¡ƒèŠ±æºè®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
    <option value="åº†å†å››å¹´æ˜¥ï¼Œæ»•å­äº¬è°ªå®ˆå·´é™µéƒ¡ã€‚è¶Šæ˜å¹´ï¼Œæ”¿é€šäººå’Œï¼Œç™¾åºŸå…·å…´ï¼Œä¹ƒé‡ä¿®å²³é˜³æ¥¼...">ã€Šå²³é˜³æ¥¼è®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
    <option value="äºˆç‹¬çˆ±è²ä¹‹å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œæ¿¯æ¸…æ¶Ÿè€Œä¸å¦–ï¼Œä¸­é€šå¤–ç›´ï¼Œä¸è”“ä¸æ...">ã€Šçˆ±è²è¯´ã€‹</option>
    <!-- å¯ç»§ç»­æ·»åŠ æ›´å¤š -->
  </select>

  <!-- æ‰‹åŠ¨ç²˜è´´ -->
  <label>æˆ–ç²˜è´´åŸæ–‡ï¼š</label>
  <textarea id="manualInput" placeholder="åœ¨æ­¤ç²˜è´´å…¨æ–‡..." rows="4" style="width:100%; padding:10px; border-radius:6px; margin:8px 0;"></textarea>

  <!-- åŸæ–‡é¢„è§ˆåŒº -->
  <div id="previewArea" style="background:#f8f9fa; padding:12px; border-radius:8px; margin:15px 0; min-height:60px; display:none;">
    <strong>é¢„è§ˆåŸæ–‡ï¼š</strong>
    <div id="previewText" style="margin-top:8px; white-space:pre-wrap; line-height:1.6;"></div>
  </div>

  <!-- ç¡®è®¤æŒ‰é’®ï¼ˆåˆå§‹ç¦ç”¨ï¼‰ -->
  <button id="confirmBtn" onclick="confirmYuanwen()" disabled style="background:#ccc;">âœ… ç¡®è®¤åŸæ–‡</button>
</div>

<script>
// å…¨å±€å˜é‡
window.yuanwen = "";

// ç›‘å¬ä¸‹æ‹‰æ¡†å’Œæ–‡æœ¬åŸŸå˜åŒ–
document.getElementById('poemSelect').addEventListener('change', updatePreview);
document.getElementById('manualInput').addEventListener('input', updatePreview);

function updatePreview() {
  const selectVal = document.getElementById('poemSelect').value;
  const manualVal = document.getElementById('manualInput').value.trim();
  const previewArea = document.getElementById('previewArea');
  const previewText = document.getElementById('previewText');
  const confirmBtn = document.getElementById('confirmBtn');

  let textToShow = '';

  // ä¼˜å…ˆæ˜¾ç¤ºæ‰‹åŠ¨è¾“å…¥å†…å®¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
  if (manualVal) {
    textToShow = manualVal;
  } else if (selectVal) {
    textToShow = selectVal;
  }

  if (textToShow) {
    previewText.textContent = textToShow;
    previewArea.style.display = 'block';
    confirmBtn.disabled = false;
    confirmBtn.style.background = '#3498db';
  } else {
    previewArea.style.display = 'none';
    confirmBtn.disabled = true;
    confirmBtn.style.background = '#ccc';
  }
}

function confirmYuanwen() {
  const selectVal = document.getElementById('poemSelect').value;
  const manualVal = document.getElementById('manualInput').value.trim();

  // å†æ¬¡è·å–æœ€ç»ˆæ–‡æœ¬ï¼ˆé˜²æ­¢ç”¨æˆ·æ”¹äº†æ²¡è§¦å‘ previewï¼‰
  let finalText = manualVal || selectVal;

  if (!finalText) {
    alert("è¯·å…ˆé€‰æ‹©æˆ–è¾“å…¥å¤æ–‡ï¼");
    return;
  }

  window.yuanwen = finalText;

  // å¯é€‰ï¼šé«˜äº®æç¤ºå·²ç¡®è®¤
  alert("âœ… åŸæ–‡å·²ç¡®è®¤ï¼å…± " + finalText.length + " å­—ã€‚\n\næ¥ä¸‹æ¥å°†è¿›å…¥åˆ†æ®µèƒŒè¯µæµç¨‹ã€‚");

  // TODO: è¿™é‡Œåç»­å¯è°ƒç”¨ autoSegment(window.yuanwen)
}
</script>