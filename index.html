<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¤è¯—èƒŒè¯µåŠ©æ‰‹</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
      background: #f9f7f0;
      padding: 15px;
      color: #333;
      line-height: 1.6;
    }
    .container { max-width: 600px; margin: 0 auto; }
    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    h3 {
      margin-bottom: 15px;
      color: #2c3e50;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
      color: #555;
    }
    select, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      font-family: inherit;
    }
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    #previewArea {
      background: #f8f9fa;
      padding: 12px;
      border-radius: 8px;
      margin: 15px 0;
      display: none;
    }
    #previewText {
      white-space: pre-wrap;
      line-height: 1.7;
      color: #333;
    }
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
    }
    button:disabled {
      background: #bdc3c7;
      cursor: not-allowed;
    }
    button:hover:not(:disabled) {
      background: #2980b9;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- M1: ç¡®è®¤åŸæ–‡æ¨¡å— -->
    <div class="card">
      <h3>ğŸ“š é€‰æ‹©æˆ–ç²˜è´´è¦èƒŒè¯µçš„å¤æ–‡</h3>
      
      <label>é€‰æ‹©ç¯‡ç›®ï¼š</label>
      <select id="poemSelect">
        <option value="">-- è¯·é€‰æ‹© --</option>
        <option value="æ™‹å¤ªå…ƒä¸­ï¼Œæ­¦é™µäººæ•é±¼ä¸ºä¸šã€‚ç¼˜æºªè¡Œï¼Œå¿˜è·¯ä¹‹è¿œè¿‘ã€‚å¿½é€¢æ¡ƒèŠ±æ—ï¼Œå¤¹å²¸æ•°ç™¾æ­¥ï¼Œä¸­æ— æ‚æ ‘ï¼ŒèŠ³è‰é²œç¾ï¼Œè½è‹±ç¼¤çº·ã€‚æ¸”äººç”šå¼‚ä¹‹ï¼Œå¤å‰è¡Œï¼Œæ¬²ç©·å…¶æ—ã€‚

æ—å°½æ°´æºï¼Œä¾¿å¾—ä¸€å±±ï¼Œå±±æœ‰å°å£ï¼Œä»¿ä½›è‹¥æœ‰å…‰ã€‚ä¾¿èˆèˆ¹ï¼Œä»å£å…¥ã€‚åˆæç‹­ï¼Œæ‰é€šäººã€‚å¤è¡Œæ•°åæ­¥ï¼Œè±ç„¶å¼€æœ—ã€‚åœŸåœ°å¹³æ—·ï¼Œå±‹èˆä¿¨ç„¶ï¼Œæœ‰è‰¯ç”°ã€ç¾æ± ã€æ¡‘ç«¹ä¹‹å±ã€‚é˜¡é™Œäº¤é€šï¼Œé¸¡çŠ¬ç›¸é—»ã€‚å…¶ä¸­å¾€æ¥ç§ä½œï¼Œç”·å¥³è¡£ç€ï¼Œæ‚‰å¦‚å¤–äººã€‚é»„å‘å‚é««ï¼Œå¹¶æ€¡ç„¶è‡ªä¹ã€‚

è§æ¸”äººï¼Œä¹ƒå¤§æƒŠï¼Œé—®æ‰€ä»æ¥ã€‚å…·ç­”ä¹‹ã€‚ä¾¿è¦è¿˜å®¶ï¼Œè®¾é…’æ€é¸¡ä½œé£Ÿã€‚æ‘ä¸­é—»æœ‰æ­¤äººï¼Œå’¸æ¥é—®è®¯ã€‚è‡ªäº‘å…ˆä¸–é¿ç§¦æ—¶ä¹±ï¼Œç‡å¦»å­é‚‘äººæ¥æ­¤ç»å¢ƒï¼Œä¸å¤å‡ºç„‰ï¼Œé‚ä¸å¤–äººé—´éš”ã€‚é—®ä»Šæ˜¯ä½•ä¸–ï¼Œä¹ƒä¸çŸ¥æœ‰æ±‰ï¼Œæ— è®ºé­æ™‹ã€‚æ­¤äººä¸€ä¸€ä¸ºå…·è¨€æ‰€é—»ï¼Œçš†å¹æƒ‹ã€‚ä½™äººå„å¤å»¶è‡³å…¶å®¶ï¼Œçš†å‡ºé…’é£Ÿã€‚åœæ•°æ—¥ï¼Œè¾å»ã€‚æ­¤ä¸­äººè¯­äº‘ï¼šâ€œä¸è¶³ä¸ºå¤–äººé“ä¹Ÿã€‚â€

æ—¢å‡ºï¼Œå¾—å…¶èˆ¹ï¼Œä¾¿æ‰¶å‘è·¯ï¼Œå¤„å¤„å¿—ä¹‹ã€‚åŠéƒ¡ä¸‹ï¼Œè¯£å¤ªå®ˆï¼Œè¯´å¦‚æ­¤ã€‚å¤ªå®ˆå³é£äººéšå…¶å¾€ï¼Œå¯»å‘æ‰€å¿—ï¼Œé‚è¿·ï¼Œä¸å¤å¾—è·¯ã€‚

å—é˜³åˆ˜å­éª¥ï¼Œé«˜å°šå£«ä¹Ÿï¼Œé—»ä¹‹ï¼Œæ¬£ç„¶è§„å¾€ã€‚æœªæœï¼Œå¯»ç—…ç»ˆã€‚åé‚æ— é—®æ´¥è€…ã€‚

">ã€Šæ¡ƒèŠ±æºè®°ã€‹</option>
        <option value="åº†å†å››å¹´æ˜¥ï¼Œæ»•å­äº¬è°ªå®ˆå·´é™µéƒ¡ã€‚è¶Šæ˜å¹´ï¼Œæ”¿é€šäººå’Œï¼Œç™¾åºŸå…·å…´ï¼Œä¹ƒé‡ä¿®å²³é˜³æ¥¼ï¼Œå¢å…¶æ—§åˆ¶ï¼Œåˆ»å”è´¤ä»Šäººè¯—èµ‹äºå…¶ä¸Š...">ã€Šå²³é˜³æ¥¼è®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
        <option value="äºˆç‹¬çˆ±è²ä¹‹å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œæ¿¯æ¸…æ¶Ÿè€Œä¸å¦–ï¼Œä¸­é€šå¤–ç›´ï¼Œä¸è”“ä¸æï¼Œé¦™è¿œç›Šæ¸…ï¼Œäº­äº­å‡€æ¤...">ã€Šçˆ±è²è¯´ã€‹</option>
        <option value="å±±ä¸åœ¨é«˜ï¼Œæœ‰ä»™åˆ™åã€‚æ°´ä¸åœ¨æ·±ï¼Œæœ‰é¾™åˆ™çµã€‚æ–¯æ˜¯é™‹å®¤ï¼ŒæƒŸå¾å¾·é¦¨...">ã€Šé™‹å®¤é“­ã€‹</option>
        <option value="ä»å°ä¸˜è¥¿è¡Œç™¾äºŒåæ­¥ï¼Œéš”ç¯ç«¹ï¼Œé—»æ°´å£°ï¼Œå¦‚é¸£ç®ç¯ï¼Œå¿ƒä¹ä¹‹...">ã€Šå°çŸ³æ½­è®°ã€‹ï¼ˆèŠ‚é€‰ï¼‰</option>
      </select>

      <label>æˆ–ç²˜è´´åŸæ–‡ï¼š</label>
      <textarea id="manualInput" placeholder="åœ¨æ­¤ç²˜è´´å…¨æ–‡..."></textarea>

      <div id="previewArea">
        <strong>é¢„è§ˆåŸæ–‡ï¼š</strong>
        <div id="previewText"></div>
      </div>

      <button id="confirmBtn" disabled>âœ… ç¡®è®¤åŸæ–‡</button>
    </div>

    <!-- åç»­æ¨¡å—ï¼ˆM2-M6ï¼‰å°†åœ¨è¿™é‡Œæ·»åŠ  -->
  </div>
<script>
  window.yuanwen = "";

  function updatePreview() {
    const selectVal = document.getElementById('poemSelect').value;
    const manualVal = document.getElementById('manualInput').value.trim();
    const previewArea = document.getElementById('previewArea');
    const previewText = document.getElementById('previewText');
    const confirmBtn = document.getElementById('confirmBtn');

    const textToShow = manualVal || selectVal;

    if (textToShow) {
      previewText.textContent = textToShow;
      previewArea.style.display = 'block';
      confirmBtn.disabled = false;
    } else {
      previewArea.style.display = 'none';
      confirmBtn.disabled = true;
    }
  }

  function confirmYuanwen() {
    const selectVal = document.getElementById('poemSelect').value;
    const manualVal = document.getElementById('manualInput').value.trim();
    const finalText = manualVal || selectVal;

    if (!finalText) {
      alert("è¯·å…ˆé€‰æ‹©æˆ–è¾“å…¥å¤æ–‡ï¼");
      return;
    }

    window.yuanwen = finalText;
    const segments = autoSegment(finalText);
    
    console.log("âœ… åŸæ–‡å·²ç¡®è®¤");
    console.log("æ€»å­—æ•°:", finalText.length);
    console.log("åˆ†æ®µæ•°é‡:", segments.length);
    console.log("åˆ†æ®µç»“æœ:", segments);
    
    alert(`âœ… åŸæ–‡å·²ç¡®è®¤ï¼\næ€»å­—æ•°ï¼š${finalText.length}\nå…±åˆ†ä¸ºï¼š${segments.length} æ®µ`);
  }

  function autoSegment(text) {
    if (!text || typeof text !== 'string') return [];
    return text
      .split(/\n\s*\n/)
      .map(p => p.trim())
      .filter(p => p !== '');
  }

  document.getElementById('poemSelect').addEventListener('change', updatePreview);
  document.getElementById('manualInput').addEventListener('input', updatePreview);
  document.getElementById('confirmBtn').addEventListener('click', confirmYuanwen);
</script>
 
</body>
</html>